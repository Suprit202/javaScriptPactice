<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="./node_modules/bootstrap-icons/font/bootstrap-icons.css">
  <link rel="stylesheet" href="./node_modules/bootstrap/dist/css/bootstrap.css">
  <script src="./node_modules/bootstrap/dist/js/bootstrap.bundle.js"></script>
</head>

<body class="container-fluid" onload="onLoad()">
  <h1 class="text-center mt-4  bi bi-ticket-perforated"> Book My Show</h1>
  <div class="mt-4 w-25">
    <div class="my-2">
      <label class="form-label fw-bold">Add new movie</label>
      <div class="input-group">
        <input id="txtMovie" class="form-control" type="text">
        <button onclick="addClick()" class="btn btn-primary">Add</button>
      </div>
    </div>
    <div class="my-2">
      <div class="my-2">
        <button onclick="sortAsc()" class="bi bi-sort-alpha-down btn btn-success"></button>
        <button onclick="sortDesc()" class="bi bi-sort-alpha-up btn btn-success"></button>
      </div>

      <div>
        <select id="lstMovies" class="form-select">

        </select>
        <label id="lblCount" class="fom-label fw-bold"></label>
      </div>
    </div>
    <div class="my-2">

      <button onclick="editClick()" data-bs-target="#edit" data-bs-toggle="modal"
        class="bi bi-pen-fill btn btn-warning">Edit </button>

      <div class="modal fade" id="edit">

        <div class="modal-dialog modal-dialog-centered">

          <div class="modal-content">

            <div class="modal-header">

              <h3>Edit Movie</h3>

            </div>

            <div class="modal-body">

              <input type="text" id="txtEditMovie" class="form-control">

            </div>

            <div class="modal-footer">

              <button data-bs-dismiss="modal" onclick="SaveClick()" class="btn btn-success">Save</button>

              <button data-bs-dismiss="modal" class="btn btn-warning mx-2">Cancel</button>

            </div>

          </div>

        </div>

      </div>

      <button onclick="RemoveClick()" class="bi bi-trash btn btn-danger"> Remove </button>
      <button onclick="ClearClick()" class="bi bi-trash-fill btn btn-outline-danger"> Clear All </button>

    </div>
  </div>
</body>

<script>
  var movies = ["KGF", "Star War"];

  function onLoad() {
    document.getElementById('lstMovies').innerHTML = "";
    movies.map(movie => {
      var option = document.createElement('option');
      option.value = movie;
      option.innerText = movie;
      document.getElementById('lstMovies').appendChild(option);
    })
  }

  function addClick() {
    var movieName = document.getElementById("txtMovie").value;
    if (movies.indexOf(movieName) === -1) {
      movies.push(movieName);
      onLoad();
      alert(`${movieName} added to list!`)
    }
  }

  function editClick() {
    var lstMovies = document.getElementById("lstMovies").value;
    var txtEditMovie = document.getElementById("txtEditMovie");
    txtEditMovie.value = lstMovies;
  }

  function SaveClick(e) {
     var txtEditMovie = document.getElementById("txtEditMovie").value;
     var lstMovies = document.getElementById("lstMovies");
     var selectedIndex = lstMovies.selectedIndex;
     if (selectedIndex !== -1) {
      movies[selectedIndex] = txtEditMovie;
      onLoad();
      lstMovies.selectedIndex = selectedIndex;  //onLoad() clears the list and rebuilds it â€” so the selection gets lost. After refreshing, the <select> goes back to the default (usually the first option).
      alert('Movie update successfully!!!')
     }
  }

  function sortAsc() {
    movies.sort();
    onLoad();
  }

  function sortDesc() {
    movies.sort().reverse();
    onLoad();
  }

  function RemoveClick() {
    movies.pop();
    onLoad();
  }

  function ClearClick() {
    movies.length = 0;
    onLoad();
  }
</script>

</html>